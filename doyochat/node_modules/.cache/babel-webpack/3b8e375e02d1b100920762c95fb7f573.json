{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/User/project/DOYOChat/doyochat/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { TestBed } from '@angular/core/testing';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { of } from 'rxjs';\nimport { AuthService } from '../services/auth.service';\nimport { LoginComponent } from './login.component';\ndescribe('LoginComponent', () => {\n  let component;\n  let fixture;\n  let service;\n  let router;\n  beforeEach( /*#__PURE__*/_asyncToGenerator(function* () {\n    router = jasmine.createSpyObj('Router', ['navigate']);\n    service = jasmine.createSpyObj('AuthService', ['login']);\n    yield TestBed.configureTestingModule({\n      declarations: [LoginComponent],\n      providers: [{\n        provide: AuthService,\n        useValue: service\n      }, {\n        provide: Router,\n        useValue: router\n      }],\n      schemas: [CUSTOM_ELEMENTS_SCHEMA]\n    }).compileComponents();\n  }));\n  beforeEach(() => {\n    fixture = TestBed.createComponent(LoginComponent);\n    component = fixture.componentInstance;\n    fixture.detectChanges();\n  });\n  it('should create', () => {\n    expect(component).toBeTruthy();\n  });\n  it('should init form', () => {\n    component.initForm();\n    expect(component.form).toBeDefined();\n  });\n  it('should has errors of form', () => {\n    component.form = new FormGroup({\n      email: new FormControl('', [Validators.required, Validators.minLength(3), Validators.maxLength(35), Validators.email]),\n      password: new FormControl('', [Validators.required, Validators.minLength(8), Validators.maxLength(35), Validators.pattern('^[A-Za-z0-9]+$')])\n    });\n    component.form.setValue({\n      email: 'newgmail.com',\n      password: '111811111115'\n    });\n    expect(component.form.errors).toBeTruthy();\n  });\n  it('should call auth login method', () => {\n    service.login = jasmine.createSpy().and.returnValue(of('response'));\n    router.navigate = jasmine.createSpy().and.returnValue(new Promise(() => true));\n    component.login();\n    expect(component.form.value).toBeTruthy();\n    expect(service.login).toHaveBeenCalled();\n    expect(router.navigate).toHaveBeenCalledWith(['/home']);\n  });\n  it('should return answer from server', () => {\n    service.login = jasmine.createSpy().and.returnValue(of('error'));\n    component.form.setValue({\n      email: 'new@gmail.com',\n      password: '111811111115'\n    });\n    expect(component.login()).toBeDefined();\n  });\n  it('should navigate to default page', () => {\n    spyOn(component.form, 'value').and.returnValue(false);\n    router.navigate = jasmine.createSpy().and.returnValue(new Promise(() => true));\n    component.login();\n    expect(router.navigate).toHaveBeenCalledWith(['']);\n  });\n});","map":{"version":3,"sources":["C:/Users/User/project/DOYOChat/doyochat/src/app/login/login.component.spec.ts"],"names":["CUSTOM_ELEMENTS_SCHEMA","TestBed","FormGroup","FormControl","Validators","Router","of","AuthService","LoginComponent","describe","component","fixture","service","router","beforeEach","jasmine","createSpyObj","configureTestingModule","declarations","providers","provide","useValue","schemas","compileComponents","createComponent","componentInstance","detectChanges","it","expect","toBeTruthy","initForm","form","toBeDefined","email","required","minLength","maxLength","password","pattern","setValue","errors","login","createSpy","and","returnValue","navigate","Promise","value","toHaveBeenCalled","toHaveBeenCalledWith","spyOn"],"mappings":"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","sourcesContent":["import { CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\nimport { TestBed } from '@angular/core/testing';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { of } from 'rxjs';\r\nimport { AuthService } from '../services/auth.service';\r\nimport { LoginComponent } from './login.component';\r\ndescribe('LoginComponent', () => {\r\n    let component;\r\n    let fixture;\r\n    let service;\r\n    let router;\r\n    beforeEach(async () => {\r\n        router = jasmine.createSpyObj('Router', ['navigate']);\r\n        service = jasmine.createSpyObj('AuthService', ['login']);\r\n        await TestBed.configureTestingModule({\r\n            declarations: [LoginComponent],\r\n            providers: [\r\n                {\r\n                    provide: AuthService,\r\n                    useValue: service\r\n                },\r\n                {\r\n                    provide: Router,\r\n                    useValue: router\r\n                }\r\n            ],\r\n            schemas: [CUSTOM_ELEMENTS_SCHEMA],\r\n        })\r\n            .compileComponents();\r\n    });\r\n    beforeEach(() => {\r\n        fixture = TestBed.createComponent(LoginComponent);\r\n        component = fixture.componentInstance;\r\n        fixture.detectChanges();\r\n    });\r\n    it('should create', () => {\r\n        expect(component).toBeTruthy();\r\n    });\r\n    it('should init form', () => {\r\n        component.initForm();\r\n        expect(component.form).toBeDefined();\r\n    });\r\n    it('should has errors of form', () => {\r\n        component.form = new FormGroup({\r\n            email: new FormControl('', [Validators.required, Validators.minLength(3), Validators.maxLength(35), Validators.email]),\r\n            password: new FormControl('', [Validators.required, Validators.minLength(8), Validators.maxLength(35), Validators.pattern('^[A-Za-z0-9]+$')])\r\n        });\r\n        component.form.setValue({ email: 'newgmail.com', password: '111811111115' });\r\n        expect(component.form.errors).toBeTruthy();\r\n    });\r\n    it('should call auth login method', () => {\r\n        service.login = jasmine.createSpy().and.returnValue(of('response'));\r\n        router.navigate = jasmine.createSpy().and.returnValue(new Promise(() => true));\r\n        component.login();\r\n        expect(component.form.value).toBeTruthy();\r\n        expect(service.login).toHaveBeenCalled();\r\n        expect(router.navigate).toHaveBeenCalledWith(['/home']);\r\n    });\r\n    it('should return answer from server', () => {\r\n        service.login = jasmine.createSpy().and.returnValue(of('error'));\r\n        component.form.setValue({ email: 'new@gmail.com', password: '111811111115' });\r\n        expect(component.login()).toBeDefined();\r\n    });\r\n    it('should navigate to default page', () => {\r\n        spyOn(component.form, 'value').and.returnValue(false);\r\n        router.navigate = jasmine.createSpy().and.returnValue(new Promise(() => true));\r\n        component.login();\r\n        expect(router.navigate).toHaveBeenCalledWith(['']);\r\n    });\r\n});\r\n"]},"metadata":{},"sourceType":"module"}