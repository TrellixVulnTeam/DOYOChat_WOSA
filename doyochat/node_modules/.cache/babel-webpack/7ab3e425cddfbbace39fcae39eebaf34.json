{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/User/project/DOYOChat/doyochat/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { TestBed } from '@angular/core/testing';\nimport { Router } from '@angular/router';\nimport { of } from 'rxjs';\nimport { AuthService } from '../services/auth.service';\nimport { DrawService } from '../services/draw.service';\nimport { LoginComponent } from './login.component';\ndescribe('LoginComponent', () => {\n  let component;\n  let fixture;\n  let service;\n  let router;\n  let draw;\n  beforeEach( /*#__PURE__*/_asyncToGenerator(function* () {\n    router = jasmine.createSpyObj('Router', ['navigate']);\n    service = jasmine.createSpyObj('AuthService', ['login']);\n    draw = jasmine.createSpyObj('DrawService', ['setGameMode']);\n    yield TestBed.configureTestingModule({\n      declarations: [LoginComponent],\n      providers: [{\n        provide: AuthService,\n        useValue: service\n      }, {\n        provide: Router,\n        useValue: router\n      }, {\n        provide: DrawService,\n        useValue: draw\n      }],\n      schemas: [CUSTOM_ELEMENTS_SCHEMA]\n    }).compileComponents();\n  }));\n  beforeEach(() => {\n    fixture = TestBed.createComponent(LoginComponent);\n    component = fixture.componentInstance;\n    fixture.detectChanges();\n  });\n  it('should create', () => {\n    expect(component).toBeTruthy();\n  });\n  it('should init form', () => {\n    component.initForm();\n    expect(component.form).toBeDefined();\n  });\n  it('should has errors of form', () => {\n    component.form.setValue({\n      email: 'newgmail.com',\n      password: '111811111115'\n    });\n    expect(component.form.valid).toBeFalsy();\n  });\n  it('should call auth login method', () => {\n    component.form.setValue({\n      email: 'new@gmail.com',\n      password: '12345678'\n    });\n    service.login = jasmine.createSpy().and.returnValue(of('response')); // router.navigate = jasmine.createSpy().and.returnValue(new Promise(() => true));\n\n    component.login();\n    expect(component.form.value).toBeTruthy();\n    expect(service.login).toHaveBeenCalled(); // expect(router.navigate).toHaveBeenCalledWith(['/home']);\n  });\n  it('should return answer from server', () => {\n    service.login = jasmine.createSpy().and.returnValue(of('error'));\n    component.form.setValue({\n      email: 'new@gmail.com',\n      password: '111811111115'\n    });\n    expect(component.login()).toBeDefined();\n  });\n  it('should navigate to default page', () => {\n    spyOn(component.form, 'value').and.returnValue(false);\n    router.navigate = jasmine.createSpy().and.returnValue(new Promise(() => true));\n    component.login();\n    expect(router.navigate).toHaveBeenCalledWith(['home']);\n  });\n});","map":{"version":3,"sources":["C:/Users/User/project/DOYOChat/doyochat/src/app/login/login.component.spec.ts"],"names":["CUSTOM_ELEMENTS_SCHEMA","TestBed","Router","of","AuthService","DrawService","LoginComponent","describe","component","fixture","service","router","draw","beforeEach","jasmine","createSpyObj","configureTestingModule","declarations","providers","provide","useValue","schemas","compileComponents","createComponent","componentInstance","detectChanges","it","expect","toBeTruthy","initForm","form","toBeDefined","setValue","email","password","valid","toBeFalsy","login","createSpy","and","returnValue","value","toHaveBeenCalled","spyOn","navigate","Promise","toHaveBeenCalledWith"],"mappings":";AAAA,SAASA,sBAAT,QAAuC,eAAvC;AACA,SAASC,OAAT,QAAwB,uBAAxB;AACA,SAASC,MAAT,QAAuB,iBAAvB;AACA,SAASC,EAAT,QAAmB,MAAnB;AACA,SAASC,WAAT,QAA4B,0BAA5B;AACA,SAASC,WAAT,QAA4B,0BAA5B;AACA,SAASC,cAAT,QAA+B,mBAA/B;AACAC,QAAQ,CAAC,gBAAD,EAAmB,MAAM;AAC7B,MAAIC,SAAJ;AACA,MAAIC,OAAJ;AACA,MAAIC,OAAJ;AACA,MAAIC,MAAJ;AACA,MAAIC,IAAJ;AACAC,EAAAA,UAAU,iCAAC,aAAY;AACnBF,IAAAA,MAAM,GAAGG,OAAO,CAACC,YAAR,CAAqB,QAArB,EAA+B,CAAC,UAAD,CAA/B,CAAT;AACAL,IAAAA,OAAO,GAAGI,OAAO,CAACC,YAAR,CAAqB,aAArB,EAAoC,CAAC,OAAD,CAApC,CAAV;AACAH,IAAAA,IAAI,GAAGE,OAAO,CAACC,YAAR,CAAqB,aAArB,EAAoC,CAAC,aAAD,CAApC,CAAP;AACA,UAAMd,OAAO,CAACe,sBAAR,CAA+B;AACjCC,MAAAA,YAAY,EAAE,CAACX,cAAD,CADmB;AAEjCY,MAAAA,SAAS,EAAE,CACP;AACIC,QAAAA,OAAO,EAAEf,WADb;AAEIgB,QAAAA,QAAQ,EAAEV;AAFd,OADO,EAKP;AACIS,QAAAA,OAAO,EAAEjB,MADb;AAEIkB,QAAAA,QAAQ,EAAET;AAFd,OALO,EASP;AACIQ,QAAAA,OAAO,EAAEd,WADb;AAEIe,QAAAA,QAAQ,EAAER;AAFd,OATO,CAFsB;AAgBjCS,MAAAA,OAAO,EAAE,CAACrB,sBAAD;AAhBwB,KAA/B,EAkBDsB,iBAlBC,EAAN;AAmBH,GAvBS,EAAV;AAwBAT,EAAAA,UAAU,CAAC,MAAM;AACbJ,IAAAA,OAAO,GAAGR,OAAO,CAACsB,eAAR,CAAwBjB,cAAxB,CAAV;AACAE,IAAAA,SAAS,GAAGC,OAAO,CAACe,iBAApB;AACAf,IAAAA,OAAO,CAACgB,aAAR;AACH,GAJS,CAAV;AAKAC,EAAAA,EAAE,CAAC,eAAD,EAAkB,MAAM;AACtBC,IAAAA,MAAM,CAACnB,SAAD,CAAN,CAAkBoB,UAAlB;AACH,GAFC,CAAF;AAGAF,EAAAA,EAAE,CAAC,kBAAD,EAAqB,MAAM;AACzBlB,IAAAA,SAAS,CAACqB,QAAV;AACAF,IAAAA,MAAM,CAACnB,SAAS,CAACsB,IAAX,CAAN,CAAuBC,WAAvB;AACH,GAHC,CAAF;AAIAL,EAAAA,EAAE,CAAC,2BAAD,EAA8B,MAAM;AAClClB,IAAAA,SAAS,CAACsB,IAAV,CAAeE,QAAf,CAAwB;AAAEC,MAAAA,KAAK,EAAE,cAAT;AAAyBC,MAAAA,QAAQ,EAAE;AAAnC,KAAxB;AACAP,IAAAA,MAAM,CAACnB,SAAS,CAACsB,IAAV,CAAeK,KAAhB,CAAN,CAA6BC,SAA7B;AACH,GAHC,CAAF;AAIAV,EAAAA,EAAE,CAAC,+BAAD,EAAkC,MAAM;AACtClB,IAAAA,SAAS,CAACsB,IAAV,CAAeE,QAAf,CAAwB;AAAEC,MAAAA,KAAK,EAAE,eAAT;AAA0BC,MAAAA,QAAQ,EAAE;AAApC,KAAxB;AACAxB,IAAAA,OAAO,CAAC2B,KAAR,GAAgBvB,OAAO,CAACwB,SAAR,GAAoBC,GAApB,CAAwBC,WAAxB,CAAoCrC,EAAE,CAAC,UAAD,CAAtC,CAAhB,CAFsC,CAGtC;;AACAK,IAAAA,SAAS,CAAC6B,KAAV;AACAV,IAAAA,MAAM,CAACnB,SAAS,CAACsB,IAAV,CAAeW,KAAhB,CAAN,CAA6Bb,UAA7B;AACAD,IAAAA,MAAM,CAACjB,OAAO,CAAC2B,KAAT,CAAN,CAAsBK,gBAAtB,GANsC,CAOtC;AACH,GARC,CAAF;AASAhB,EAAAA,EAAE,CAAC,kCAAD,EAAqC,MAAM;AACzChB,IAAAA,OAAO,CAAC2B,KAAR,GAAgBvB,OAAO,CAACwB,SAAR,GAAoBC,GAApB,CAAwBC,WAAxB,CAAoCrC,EAAE,CAAC,OAAD,CAAtC,CAAhB;AACAK,IAAAA,SAAS,CAACsB,IAAV,CAAeE,QAAf,CAAwB;AAAEC,MAAAA,KAAK,EAAE,eAAT;AAA0BC,MAAAA,QAAQ,EAAE;AAApC,KAAxB;AACAP,IAAAA,MAAM,CAACnB,SAAS,CAAC6B,KAAV,EAAD,CAAN,CAA0BN,WAA1B;AACH,GAJC,CAAF;AAKAL,EAAAA,EAAE,CAAC,iCAAD,EAAoC,MAAM;AACxCiB,IAAAA,KAAK,CAACnC,SAAS,CAACsB,IAAX,EAAiB,OAAjB,CAAL,CAA+BS,GAA/B,CAAmCC,WAAnC,CAA+C,KAA/C;AACA7B,IAAAA,MAAM,CAACiC,QAAP,GAAkB9B,OAAO,CAACwB,SAAR,GAAoBC,GAApB,CAAwBC,WAAxB,CAAoC,IAAIK,OAAJ,CAAY,MAAM,IAAlB,CAApC,CAAlB;AACArC,IAAAA,SAAS,CAAC6B,KAAV;AACAV,IAAAA,MAAM,CAAChB,MAAM,CAACiC,QAAR,CAAN,CAAwBE,oBAAxB,CAA6C,CAAC,MAAD,CAA7C;AACH,GALC,CAAF;AAMH,CAlEO,CAAR","sourcesContent":["import { CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\nimport { TestBed } from '@angular/core/testing';\r\nimport { Router } from '@angular/router';\r\nimport { of } from 'rxjs';\r\nimport { AuthService } from '../services/auth.service';\r\nimport { DrawService } from '../services/draw.service';\r\nimport { LoginComponent } from './login.component';\r\ndescribe('LoginComponent', () => {\r\n    let component;\r\n    let fixture;\r\n    let service;\r\n    let router;\r\n    let draw;\r\n    beforeEach(async () => {\r\n        router = jasmine.createSpyObj('Router', ['navigate']);\r\n        service = jasmine.createSpyObj('AuthService', ['login']);\r\n        draw = jasmine.createSpyObj('DrawService', ['setGameMode']);\r\n        await TestBed.configureTestingModule({\r\n            declarations: [LoginComponent],\r\n            providers: [\r\n                {\r\n                    provide: AuthService,\r\n                    useValue: service\r\n                },\r\n                {\r\n                    provide: Router,\r\n                    useValue: router\r\n                },\r\n                {\r\n                    provide: DrawService,\r\n                    useValue: draw\r\n                }\r\n            ],\r\n            schemas: [CUSTOM_ELEMENTS_SCHEMA],\r\n        })\r\n            .compileComponents();\r\n    });\r\n    beforeEach(() => {\r\n        fixture = TestBed.createComponent(LoginComponent);\r\n        component = fixture.componentInstance;\r\n        fixture.detectChanges();\r\n    });\r\n    it('should create', () => {\r\n        expect(component).toBeTruthy();\r\n    });\r\n    it('should init form', () => {\r\n        component.initForm();\r\n        expect(component.form).toBeDefined();\r\n    });\r\n    it('should has errors of form', () => {\r\n        component.form.setValue({ email: 'newgmail.com', password: '111811111115' });\r\n        expect(component.form.valid).toBeFalsy();\r\n    });\r\n    it('should call auth login method', () => {\r\n        component.form.setValue({ email: 'new@gmail.com', password: '12345678' });\r\n        service.login = jasmine.createSpy().and.returnValue(of('response'));\r\n        // router.navigate = jasmine.createSpy().and.returnValue(new Promise(() => true));\r\n        component.login();\r\n        expect(component.form.value).toBeTruthy();\r\n        expect(service.login).toHaveBeenCalled();\r\n        // expect(router.navigate).toHaveBeenCalledWith(['/home']);\r\n    });\r\n    it('should return answer from server', () => {\r\n        service.login = jasmine.createSpy().and.returnValue(of('error'));\r\n        component.form.setValue({ email: 'new@gmail.com', password: '111811111115' });\r\n        expect(component.login()).toBeDefined();\r\n    });\r\n    it('should navigate to default page', () => {\r\n        spyOn(component.form, 'value').and.returnValue(false);\r\n        router.navigate = jasmine.createSpy().and.returnValue(new Promise(() => true));\r\n        component.login();\r\n        expect(router.navigate).toHaveBeenCalledWith(['home']);\r\n    });\r\n});\r\n"]},"metadata":{},"sourceType":"module"}